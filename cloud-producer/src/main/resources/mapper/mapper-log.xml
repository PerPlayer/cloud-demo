<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cloud.producer.dao.LogDao">

    <resultMap id="resultMap" type="com.cloud.producer.entity.LogEntity">
        <id property="id" column="id"/>
        <result property="username" column="username"/>
        <result property="operation" column="operation"/>
        <result property="method" column="method"/>
        <result property="params" column="params"/>
        <result property="time" column="time"/>
        <result property="ip" column="ip"/>
        <result property="createDate" column="create_date"/>
        <result property="createTime" column="create_time"/>
        <result property="modifyTime" column="modify_time"/>
        <result property="status" column="status"/>
        <result property="version" column="version"/>
    </resultMap>

    <sql id="selectBlock">
        t.id AS id,
        t.username AS username,
        t.operation AS operation,
        t.method AS method,
        t.params AS params,
        t.time AS time,
        t.ip AS ip,
        t.create_date AS create_date,
        t.create_time AS create_time,
        t.modify_time AS modify_time,
        t.status AS status,
        t.version AS version
    </sql>

    <insert id="save" parameterType="com.cloud.producer.entity.LogEntity" useGeneratedKeys="true">
        INSERT INTO
            crawler_log(
                id,
                username,
                operation,
                method,
                params,
                time,
                ip,
                create_date,
                create_time,
                modify_time,
                status,
                version
            )
        VALUES (
                #{id},
                #{username},
                #{operation},
                #{method},
                #{params},
                #{time},
                #{ip},
                #{createDate},
                #{createTime},
                #{modifyTime},
                #{status},
                #{version}
            )
    </insert>

    <update id="update">
        update crawler_log set ${column} = #{value} where id = #{id}
    </update>

    <update id="delete">
        delete from crawler_log where id = #{id}
    </update>

    <select id="queryById" parameterType="String" resultMap="resultMap">
        select
        <include refid="selectBlock"/>
        from
        crawler_log t
        where id = #{id}
    </select>

    <select id="queryAll" resultMap="resultMap">
        SELECT
            <include refid="selectBlock"/>
        FROM
        crawler_log t
    </select>

</mapper>
